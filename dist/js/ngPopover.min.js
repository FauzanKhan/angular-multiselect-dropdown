!function(e){"use strict";var t=e.module("ngPopover",[]);t.directive("ngPopover",["$timeout",function(e){return{restrict:"EA",scope:{direction:"@",trigger:"@",onClose:"&",onOpen:"&",popoverClass:"@"},replace:!0,transclude:!0,link:function(t,r,n,i){t.popoverClass=n.popoverClass,t.dropDirection=n.direction||"bottom";var s,c,l=document.querySelector("#"+t.trigger),p=document.querySelector('.ng-popover[trigger="'+t.trigger+'"]');l.addEventListener("click",function(e){var r=this,n=document.querySelector('.ng-popover[trigger="'+t.trigger+'"]');e.preventDefault(),a(r,n),o(r),n.classList.toggle("hide"),n.classList.contains("hide")?(i.unregisterBodyListener(),t.onClose(),t.$apply()):(i.registerBodyListener(),t.onOpen(),t.$apply())});var d=function(){var e=l.getBoundingClientRect();document.body.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},a=function(o,r){e(function(){r=document.querySelector('.ng-popover[trigger="'+t.trigger+'"]'),r.classList.toggle("hide");var e=r.offsetWidth,n=r.offsetHeight;r.classList.toggle("hide");var i=o.offsetWidth,l=o.offsetHeight;switch(t.dropDirection){case"left":s=d().left-e-10+"px",c=d().top+"px";break;case"right":s=d().left+i+10+"px",c=d().top+"px";break;case"top":s=d().left+"px",c=d().top-n-10+"px";break;default:s=d().left+"px",c=d().top+l+10+"px"}r.style.position="absolute",r.style.left=s,r.style.top=c})};a(l,p)},controller:["$scope",function(e){var t=function(r){var n=r.target,i=!1;do if(n!=document&&n.classList&&(n.classList.contains("ng-popover")||n.classList.contains("ng-popover-trigger"))){i=!0;break}while(n=n.parentNode);i||(o(),document.body.removeEventListener("click",t),e.onClose(),e.$apply())};this.registerBodyListener=function(){document.body.addEventListener("click",t)},this.unregisterBodyListener=function(){document.body.removeEventListener("click",t)}}],template:'<div class="ng-popover hide"><div class="ng-popover-wrapper {{dropDirection}}"><div class="ng-popover-content" ng-class="popoverClass"><ng-transclude></ng-transclude></div></div></div>'}}]),t.factory("ngPopoverFactory",function(){return{closePopover:function(e){document.querySelector(".ng-popover[trigger="+e+"]").classList.add("hide")},closeAll:function(){for(var e=document.querySelectorAll(".ng-popover"),t=0;t<e.length;t++)e[t].classList.contains("hide")||e[t].classList.add("hide")}}});var o=function(e){var t;e&&(t=e.getAttribute("id"));for(var o=void 0!=e?document.querySelectorAll('.ng-popover:not([trigger="'+t+'"])'):document.querySelectorAll(".ng-popover"),r=0;r<o.length;r++){var n=o[r];n.classList.contains("hide")||n.classList.add("hide")}}}(angular);